![LOGO](https://github.com/touchlane/Docs/blob/master/Assets/logo.svg)

[![Download](https://api.bintray.com/packages/touchlane/android/ExoVideoView/images/download.svg)](https://bintray.com/touchlane/android/ExoVideoView/_latestVersion)

Using VideoView or SimpleExoPlayerView for every item in a list of videos is quite resource-heavy and lags the list scrolling quite noticeably.

This project provides a way to optimize the usage of a video player by making separate ExoVideoViews share the same instance of ExoPlayer for playback. In this way only one view can play video at a time, but it is usually the intended behaviour.

The only downside of this approach is that every ExoVideoView cannot show a thumbnail generated by ExoPlayer beforehand. You may generate a thumbnail asynchronously with [MediaMetadataRetriever](https://developer.android.com/reference/android/media/MediaMetadataRetriever.html) and cache it with the image loading library of choice (Picasso, Glide, Universal Image Loader). The sample shows how to do this with the help of Picasso.

# Usage

First add the dependency to your project

```
compile 'com.touchlane.android:exo-video-view:{latest_version}'
```

Then create a new instance of ```ExoVideoController``` in your activity and add initialization/deinitialization calls in ```onStart()/onStop()``` (```onResume()/onPause()``` may also be suitable)

```
@Override
protected void onStart() {
    super.onStart();
    mExoVideoController.init();
}

@Override
protected void onStop() {
    super.onStop();
    mExoVideoController.release();
}
```

Create your ```ExoVideoView``` and set ```ExoVideoController``` instance to it. You may set ```ThumbnailProvider``` here as well

```
mExoVideoView.setExoVideoController(mExoVideoController);
mExoVideoView.setThumbnailProvider(mThumbnailProvider);
```

Set the same ```ExoVideoController``` for every new ```ExoVideoView``` and they all will share the same ExoPlayer. Then just set path to your video with ```setSource(Uri)``` and call ```play()/pause()```.

And that's pretty much it.

Feel free to use the library as is, or extend it for any missing functionality. Right now it provides only the required minimum for playing videos and may not be sufficient for all use cases.

# Attribution

Libraries and resources used
- [ExoPlayer](https://github.com/google/ExoPlayer) under Apache-2.0 License
- [Picasso](https://github.com/square/picasso) under Apache-2.0 License
- [Additional JCenter scripts](https://github.com/nuuneoi/JCenter) under Apache-2.0 License
- All videos in the sample are taken from https://videos.pexels.com under CC0 License

# License

ExoVideoView is available under the MIT license.
